{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '46829805-97afaea9a63466d4d0f01977e';\n\nexport async function search(searchQuery, page, per_page) {\n  const url = `${BASE_URL}?key=${KEY}&q=${searchQuery}&page=${page}&per_page=${per_page}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return response.json();\n}\n","export function renderMarkup(arr, galleryEl) {\n    const markup = arr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n         const li = document.createElement(\"li\");\n         li.innerHTML =`\n                  <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                      <img class=\"gallery_img\" src=\"${webformatURL}\" \n                          alt=\"${tags}\" \n                          title=\"${tags}\" />\n                      <ul class=\"statistics-list\">\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Likes</p>\n                              <p class=\"statistics_result\">${likes}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Views</p>\n                              <p class=\"statistics_result\">${views}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Comments</p>\n                              <p class=\"statistics_result\">${comments}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Downloads</p>\n                              <p class=\"statistics_result\">${downloads}</p>\n                          </li>\n                      </ul>\n                  </a>\n              `;\n              li.classList.add('gallery-list-item');\n              return li;\n        }\n      );\n    galleryEl.append(...markup);\n    const firstElement = markup[0];\n    if(firstElement){\n        const rect = firstElement.getBoundingClientRect();\n        window.scrollBy({\n            top: rect.top,\n            left: 0,\n            behavior: \"smooth\",\n          });\n    }\n  }","//library 1\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//library 2\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\n//imports from folder JS\nimport { search } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\nconst galleryList = document.querySelector('.gallery-list');\nconst form = document.querySelector('form');\nconst loader = document.querySelector('.loader');\nlet lightbox = new SimpleLightbox('.gallery-list a', {});\nconst loadMoreImagesButton = document.querySelector('.load-more');\n\nfunction elementForSearch() {\n  let searchQuery = \"\";\n  const per_page = 15;\n  let page = 1;\n  let totalHits = null;\n  async function loadImages(searchQuery, page, per_page){\n    loader.style.display = 'block';\n    loadMoreImagesButton.style.visibility = \"hidden\";\n   try{\n    if(totalHits !== null && page * per_page >= totalHits){\n      return iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\"\n            })\n    }\n    const response = await search(searchQuery, page, per_page)\n      //if are not results\n      if (response.hits.length === 0) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        //markup generation and gallery update\n      } else {\n        totalHits = response.totalHits;\n        if(totalHits / per_page > page){\n          loadMoreImagesButton.style.visibility = \"visible\";\n        }\n        renderMarkup(response.hits, galleryList);\n        lightbox.refresh();\n      }\n   } catch (error) {\n      iziToast.error({ message: error.message });\n    } finally {\n      loader.style.display = 'none';\n    };\n  };\n  \n    form.addEventListener('submit',  async event => {\n    event.preventDefault();\n    searchQuery = event.target.elements.choiceSearch.value\n      .toLowerCase()\n      .trim();\n\n    //checking for an empty input\n    if (!searchQuery) {\n      iziToast.error({ message: 'Please enter a search word.' });\n      return;\n    }else{\n    // clearing past results\n    galleryList.innerHTML = '';\n\t}\n  page = 1;\n  totalHits = null;\n  await loadImages(searchQuery, page, per_page);\n  \n  \n  });\n  loadMoreImagesButton.addEventListener('click', async () => {\n   \n    page += 1;\n    await loadImages(searchQuery, page, per_page);\n  })\n\n}\n\nelementForSearch();"],"names":["BASE_URL","KEY","search","searchQuery","page","per_page","url","response","renderMarkup","arr","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","li","firstElement","rect","galleryList","form","loader","lightbox","SimpleLightbox","loadMoreImagesButton","elementForSearch","totalHits","loadImages","iziToast","error","event"],"mappings":"6vBAAA,MAAMA,EAAW,2BACXC,EAAM,qCAEL,eAAeC,EAAOC,EAAaC,EAAMC,EAAU,CACxD,MAAMC,EAAM,GAAGN,CAAQ,QAAQC,CAAG,MAAME,CAAW,SAASC,CAAI,aAAaC,CAAQ,2DAE/EE,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MAClB,CCXO,SAASC,EAAaC,EAAKC,EAAW,CACzC,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc,CACL,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtC,OAAAA,EAAG,UAAW;AAAA,kDAC2BN,CAAa;AAAA,sDACTD,CAAY;AAAA,iCACjCE,CAAI;AAAA,mCACFA,CAAI;AAAA;AAAA;AAAA;AAAA,6DAIsBC,CAAK;AAAA;AAAA;AAAA;AAAA,6DAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6DAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6DAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,gBAKxDC,EAAG,UAAU,IAAI,mBAAmB,EAC7BA,CACZ,CACT,EACIT,EAAU,OAAO,GAAGC,CAAM,EAC1B,MAAMS,EAAeT,EAAO,CAAC,EAC7B,GAAGS,EAAa,CACZ,MAAMC,EAAOD,EAAa,wBAC1B,OAAO,SAAS,CACZ,IAAKC,EAAK,IACV,KAAM,EACN,SAAU,QACtB,CAAW,CACN,CACL,CCtCA,MAAMC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAW,IAAIC,EAAe,kBAAmB,CAAE,CAAA,EACvD,MAAMC,EAAuB,SAAS,cAAc,YAAY,EAEhE,SAASC,GAAmB,CAC1B,IAAIzB,EAAc,GAEdC,EAAO,EACPyB,EAAY,KAChB,eAAeC,EAAW3B,EAAaC,EAAMC,EAAS,CACpDmB,EAAO,MAAM,QAAU,QACvBG,EAAqB,MAAM,WAAa,SACzC,GAAG,CACF,GAAGE,IAAc,MAAQzB,EAAOC,GAAYwB,EAC1C,OAAOE,EAAS,QAAQ,CACtB,QAAS,4DACjB,CAAa,EAET,MAAMxB,EAAW,MAAML,EAAOC,EAAaC,EAAMC,CAAQ,EAEnDE,EAAS,KAAK,SAAW,EAC3BwB,EAAS,KAAK,CACZ,QACE,0EACZ,CAAS,GAGDF,EAAYtB,EAAS,UAClBsB,EAAYxB,EAAWD,IACxBuB,EAAqB,MAAM,WAAa,WAE1CnB,EAAaD,EAAS,KAAMe,CAAW,EACvCG,EAAS,QAAO,EAEpB,OAAQO,EAAO,CACbD,EAAS,MAAM,CAAE,QAASC,EAAM,OAAS,CAAA,CAC/C,QAAc,CACRR,EAAO,MAAM,QAAU,MAC7B,CAEA,CACID,EAAK,iBAAiB,SAAW,MAAMU,GAAS,CAOhD,GANAA,EAAM,eAAc,EACpB9B,EAAc8B,EAAM,OAAO,SAAS,aAAa,MAC9C,YAAa,EACb,OAGE9B,EAKLmB,EAAY,UAAY,OALN,CAChBS,EAAS,MAAM,CAAE,QAAS,6BAA+B,CAAA,EACzD,MACN,CAIE3B,EAAO,EACPyB,EAAY,KACZ,MAAMC,EAAW3B,EAAaC,EAAM,EAAQ,CAG9C,CAAG,EACDuB,EAAqB,iBAAiB,QAAS,SAAY,CAEzDvB,GAAQ,EACR,MAAM0B,EAAW3B,EAAaC,EAAM,EAAQ,CAChD,CAAG,CAEH,CAEAwB,EAAkB"}