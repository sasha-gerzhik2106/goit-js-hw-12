{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '46829805-97afaea9a63466d4d0f01977e';\n\nexport async function search(searchQuery, page, per_page) {\n  const url = `${BASE_URL}?key=${KEY}&q=${searchQuery}&page=${page}&per_page=${per_page}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return response.json();\n}\n","export function renderMarkup(arr, galleryEl) {\n    const markup = arr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `\n              <li class=\"gallery-list-item\">\n                  <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                      <img class=\"gallery_img\" src=\"${webformatURL}\" \n                          alt=\"${tags}\" \n                          title=\"${tags}\" />\n                      <ul class=\"statistics-list\">\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Likes</p>\n                              <p class=\"statistics_result\">${likes}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Views</p>\n                              <p class=\"statistics_result\">${views}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Comments</p>\n                              <p class=\"statistics_result\">${comments}</p>\n                          </li>\n                          <li class=\"statistics-item\">\n                              <p class=\"statistics-item_name\">Downloads</p>\n                              <p class=\"statistics_result\">${downloads}</p>\n                          </li>\n                      </ul>\n                  </a>\n              </li>`;\n        }\n      )\n      .join('');\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n  }","// Importing libraries\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n// Imports from folder JS\nimport { search } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\n// DOM elements\nconst galleryList = document.querySelector('.gallery-list');\nconst form = document.querySelector('form');\nconst loader = document.querySelector('.loader');\nconst loadMoreImagesButton = document.querySelector('.load-more');\n\n// Initializing SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery-list a', {});\n\n// Search and pagination state\nlet searchQuery = '';\nconst perPage = 15;\nlet currentPage = 1;\nlet totalHits = null;\n\n// Function to load images\nasync function loadImages(searchQuery, page, perPage) {\n  loader.style.display = 'block';\n\n  try {\n    // Check if we've reached the end of search results\n    if (totalHits !== null && page * perPage >= totalHits) {\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n\n    const response = await search(searchQuery, page, perPage);\n\n    // Handle no results\n    if (response.hits.length === 0) {\n      iziToast.info({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    // Update totalHits and render the results\n    totalHits = response.totalHits;\n    renderMarkup(response.hits, galleryList);\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({ message: error.message });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\n// Event listener for form submission\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  searchQuery = event.target.elements.choiceSearch.value.trim().toLowerCase();\n\n  // Validate search query\n  if (!searchQuery) {\n    iziToast.error({ message: 'Please enter a search word.' });\n    return;\n  }\n\n  // Clear previous results and reset state\n  galleryList.innerHTML = '';\n  currentPage = 1;\n  totalHits = null;\n\n  // Load initial results\n  await loadImages(searchQuery, currentPage, perPage);\n\n  // Show \"Load More\" button if results exist\n  loadMoreImagesButton.style.visibility = 'visible';\n});\n\n// Event listener for \"Load More\" button\nloadMoreImagesButton.addEventListener('click', async () => {\n  currentPage += 1;\n  loadMoreImagesButton.style.visibility = 'hidden';\n\n  await loadImages(searchQuery, currentPage, perPage);\n\n  loadMoreImagesButton.style.visibility = 'visible';\n});"],"names":["BASE_URL","KEY","search","searchQuery","page","per_page","url","response","renderMarkup","arr","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryList","form","loader","loadMoreImagesButton","lightbox","SimpleLightbox","perPage","currentPage","totalHits","loadImages","iziToast","error","event"],"mappings":"6vBAAA,MAAMA,EAAW,2BACXC,EAAM,qCAEL,eAAeC,EAAOC,EAAaC,EAAMC,EAAU,CACxD,MAAMC,EAAM,GAAGN,CAAQ,QAAQC,CAAG,MAAME,CAAW,SAASC,CAAI,aAAaC,CAAQ,2DAE/EE,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MAClB,CCXO,SAASC,EAAaC,EAAKC,EAAW,CACzC,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB;AAAA;AAAA,kDAEiCL,CAAa;AAAA,sDACTD,CAAY;AAAA,iCACjCE,CAAI;AAAA,mCACFA,CAAI;AAAA;AAAA;AAAA;AAAA,6DAIsBC,CAAK;AAAA;AAAA;AAAA;AAAA,6DAILC,CAAK;AAAA;AAAA;AAAA;AAAA,6DAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,6DAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,oBAM/D,EACA,KAAK,EAAE,EACVR,EAAU,mBAAmB,YAAaC,CAAM,CACpD,CC9BA,MAAMQ,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAuB,SAAS,cAAc,YAAY,EAG1DC,EAAW,IAAIC,EAAe,kBAAmB,CAAE,CAAA,EAGzD,IAAIrB,EAAc,GAClB,MAAMsB,EAAU,GAChB,IAAIC,EAAc,EACdC,EAAY,KAGhB,eAAeC,EAAWzB,EAAaC,EAAMqB,EAAS,CACpDJ,EAAO,MAAM,QAAU,QAEvB,GAAI,CAEF,GAAIM,IAAc,MAAQvB,EAAOqB,GAAWE,EAAW,CACrDE,EAAS,QAAQ,CACf,QAAS,4DACjB,CAAO,EACD,MACD,CAED,MAAMtB,EAAW,MAAML,EAAOC,EAAaC,EAAMqB,CAAO,EAGxD,GAAIlB,EAAS,KAAK,SAAW,EAAG,CAC9BsB,EAAS,KAAK,CACZ,QAAS,0EACjB,CAAO,EACD,MACD,CAGDF,EAAYpB,EAAS,UACrBC,EAAaD,EAAS,KAAMY,CAAW,EACvCI,EAAS,QAAO,CACjB,OAAQO,EAAO,CACdD,EAAS,MAAM,CAAE,QAASC,EAAM,OAAS,CAAA,CAC7C,QAAY,CACRT,EAAO,MAAM,QAAU,MACxB,CACH,CAGAD,EAAK,iBAAiB,SAAU,MAAOW,GAAU,CAK/C,GAJAA,EAAM,eAAc,EACpB5B,EAAc4B,EAAM,OAAO,SAAS,aAAa,MAAM,OAAO,cAG1D,CAAC5B,EAAa,CAChB0B,EAAS,MAAM,CAAE,QAAS,6BAA+B,CAAA,EACzD,MACD,CAGDV,EAAY,UAAY,GACxBO,EAAc,EACdC,EAAY,KAGZ,MAAMC,EAAWzB,EAAauB,EAAaD,CAAO,EAGlDH,EAAqB,MAAM,WAAa,SAC1C,CAAC,EAGDA,EAAqB,iBAAiB,QAAS,SAAY,CACzDI,GAAe,EACfJ,EAAqB,MAAM,WAAa,SAExC,MAAMM,EAAWzB,EAAauB,EAAaD,CAAO,EAElDH,EAAqB,MAAM,WAAa,SAC1C,CAAC"}